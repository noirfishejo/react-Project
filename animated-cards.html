<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>首頁輪播卡片</title>
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/animated-EScards.css">
</head>

<body>
    <!-- <div class="slider">
        <input type="radio" name="testimonial" id="t-1" />
        <input type="radio" name="testimonial" id="t-2" />
        <input type="radio" name="testimonial" id="t-3" checked />
        <input type="radio" name="testimonial" id="t-4" />
        <input type="radio" name="testimonial" id="t-5" />
        <div class="testimonials">
            <label class="item" for="t-1">
                <div class="mycard">
                    <div>
                        <img src="./images/icon_kimoji3.svg" alt="nivel5" class="cardimg" />
                    </div>
                    <p class="cardtitle">Práctica</p>
                    <img src="./images/icon_heart.svg" class="heart" />
                    <div>
                        <p class="carddescription">在Moonli的幫助下，我找回了內心的平靜。諮商師非常專業，給了我很多實用的建議。</p>
                    </div>
                </div>
            </label>
            <label class="item" for="t-2">
                <div class="mycard">
                    <div>
                        <img src="./images/icon_kimoji3.svg" alt="nivel5" class="cardimg" />
                    </div>
                    <p class="cardtitle">Práctica</p>
                    <img src="./images/icon_heart.svg" class="heart" />
                    <div>
                        <p class="carddescription">在Moonli的幫助下，我找回了內心的平靜。諮商師非常專業，給了我很多實用的建議。</p>
                    </div>
                </div>
            </label>
            <label class="item" for="t-3">
                <div class="mycard">
                    <div>
                        <img src="./images/icon_kimoji3.svg" alt="nivel5" class="cardimg" />
                    </div>
                    <p class="cardtitle">Práctica</p>
                    <img src="./images/icon_heart.svg" class="heart" />
                    <div>
                        <p class="carddescription">在Moonli的幫助下，我找回了內心的平靜。諮商師非常專業，給了我很多實用的建議。</p>
                    </div>
                </div>
            </label>
            <label class="item" for="t-4">
                <div class="mycard">
                    <div>
                        <img src="./images/icon_kimoji3.svg" alt="nivel5" class="cardimg" />
                    </div>
                    <p class="cardtitle">Práctica</p>
                    <img src="./images/icon_heart.svg" class="heart" />
                    <div>
                        <p class="carddescription">在Moonli的幫助下，我找回了內心的平靜。諮商師非常專業，給了我很多實用的建議。</p>
                    </div>
                </div>
            </label>
            <label class="item" for="t-5">
                <div class="mycard">
                    <div>
                        <img src="./images/icon_kimoji3.svg" alt="nivel5" class="cardimg" />
                    </div>
                    <p class="cardtitle">Práctica</p>
                    <img src="./images/icon_heart.svg" class="heart" />
                    <div>
                        <p class="carddescription">在Moonli的幫助下，我找回了內心的平靜。諮商師非常專業，給了我很多實用的建議。</p>
                    </div>
                </div>
            </label>
        </div>
        <div class="dots">
            <label for="t-1"></label>
            <label for="t-2"></label>
            <label for="t-3"></label>
            <label for="t-4"></label>
            <label for="t-5"></label>
        </div>
    </div> -->
    <div class="testimonial-slider">
        <div class="slider-wrapper">
            <div class="testimonial-card">
                <p>用戶1的評論內容...</p>
                <h3>用戶1</h3>
            </div>
            <div class="testimonial-card">
                <p>用戶2的評論內容...</p>
                <h3>用戶2</h3>
            </div>
            <div class="testimonial-card">
                <p>用戶3的評論內容...</p>
                <h3>用戶3</h3>
            </div>
            <!-- 更多的評論卡片 -->
        </div>

        <!-- 左右導航箭頭 -->
        <button class="prev">«</button>
        <button class="next">»</button>

        <!-- 底部導航點 -->
        <div class="dots">
            <span class="dot active"></span>
            <span class="dot"></span>
            <span class="dot"></span>
        </div>
    </div>

    <script>
        const sliderWrapper = document.querySelector('.slider-wrapper');
        const testimonialCards = document.querySelectorAll('.testimonial-card');
        const dots = document.querySelectorAll('.dot');
        let currentIndex = 0;
        let totalSlides = testimonialCards.length;

        // 滑鼠拖動變量
        let isDown = false;
        let startX;
        let scrollLeft;

        // 將 slider 滾動到指定 index
        function goToSlide(index) {
            sliderWrapper.style.transform = `translateX(-${index * 100}%)`;
            updateDots(index);
        }

        // 更新導航點的狀態
        function updateDots(index) {
            dots.forEach((dot, i) => {
                dot.classList.toggle('active', i === index);
            });
        }

        // 自動播放
        let autoPlay = setInterval(() => {
            currentIndex = (currentIndex + 1) % totalSlides;
            goToSlide(currentIndex);
        }, 3000); // 每 3 秒滾動一次

        // 點擊導航點
        dots.forEach((dot, index) => {
            dot.addEventListener('click', () => {
                currentIndex = index;
                goToSlide(index);
                resetAutoPlay();
            });
        });

        // 點擊左箭頭
        document.querySelector('.prev').addEventListener('click', () => {
            currentIndex = (currentIndex - 1 + totalSlides) % totalSlides;
            goToSlide(currentIndex);
            resetAutoPlay();
        });

        // 點擊右箭頭
        document.querySelector('.next').addEventListener('click', () => {
            currentIndex = (currentIndex + 1) % totalSlides;
            goToSlide(currentIndex);
            resetAutoPlay();
        });

        // 重置自動播放計時器
        function resetAutoPlay() {
            clearInterval(autoPlay);
            autoPlay = setInterval(() => {
                currentIndex = (currentIndex + 1) % totalSlides;
                goToSlide(currentIndex);
            }, 3000);
        }

        // 滑鼠拖動功能
        sliderWrapper.addEventListener('mousedown', (e) => {
            isDown = true;
            sliderWrapper.classList.add('active');
            startX = e.pageX;
            scrollLeft = sliderWrapper.scrollLeft;
        });

        sliderWrapper.addEventListener('mouseleave', () => {
            isDown = false;
            sliderWrapper.classList.remove('active');
        });

        sliderWrapper.addEventListener('mouseup', () => {
            isDown = false;
            sliderWrapper.classList.remove('active');
        });

        sliderWrapper.addEventListener('mousemove', (e) => {
            if (!isDown) return;
            e.preventDefault();
            const x = e.pageX - startX;
            const walk = x * 2; // 滑動速度控制
            sliderWrapper.scrollLeft = scrollLeft - walk;
        });

        // 添加觸控支持（手機）
        sliderWrapper.addEventListener('touchstart', (e) => {
            isDown = true;
            startX = e.touches[0].pageX;
            scrollLeft = sliderWrapper.scrollLeft;
        });

        sliderWrapper.addEventListener('touchend', () => {
            isDown = false;
        });

        sliderWrapper.addEventListener('touchmove', (e) => {
            if (!isDown) return;
            const x = e.touches[0].pageX - startX;
            const walk = x * 2;
            sliderWrapper.scrollLeft = scrollLeft - walk;
        });

    </script>
</body>

</html>